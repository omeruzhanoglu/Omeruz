<!DOCTYPE html>
<html lang="en">
<head> 
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta name="apple-mobile-web-app-capable" content="yes">

<style>
 html ,body{
  height: 100%;
border: 0;
margin: 0;   
 }

/* This code specifies the style of 'test1'.*/

   .test1{
    background-color: aqua;
    width: 64px;
    height: 64px;
    position: absolute;}
</style>
</head> 
<body onkeydown="keydown(event)" onkeyup="keyup(event)">
      <div tabindex="1" class="test1">test</div>



    <script>
//This code sets the shape's speed.
       var el = document.querySelector(".test1")
       var vec = {x:0.,y:0}

       var apply = function(v) {
        el.style.left= (v.x)+'px';
        el.style.top= (v.y)+'px';

// This code makes the shape accelerate and decelerate.
        setTimeout ( function(){

          if(keys[39]) vec.x  = vec.x + Math.sign( vec.x)+0.001;
          if(keys[37]) vec.x  =  vec.x - Math.sign( vec.x)+0.001;
          if(keys[40]) vec.y  = vec.y + Math.sign( vec.y)+0.001;
          if(keys[38]) vec.y  =  vec.y - Math.sign( vec.y)+0.001;
          
// This code defines the boundary of where the shape can move.
        
         if(vec.x > 0.0 && el.offsetLeft > document.body.offsetWidth - el.offsetWidth){
            vec.x=-1.0*vec.x;}

         if(vec.x <0.0 && el.offsetLeft < 0){
            vec.x= -1.0*vec.x}

         
         if(vec.y > 0.0 && el.offsetTop > document.body.offsetHeight - el.offsetHeight){
            vec.y=-1.0*vec.y;}

            if(vec.y <0.0 && el.offsetTop < 0){
            vec.y= -1.0*vec.y}

 
         
        var newV= {x:v.x+vec.x,y:v.y+vec.y};
            

      apply(newV)
      } ,30); }


// This code determines which keys will control the shape's movement.
      apply({x:0,y:0})

      var keys = [];

      keydown = function(event){

        el.innerHTML = event.keyCode
 
          keys[event.keyCode]  =  true; 

          console.log(keys);
        
    
      }
    keyup = function(event){ 

      keys[event.keyCode]  =  false; 
 }


    </script>
</body>
</html>